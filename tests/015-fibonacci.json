{"name":"d08cc506-ed1a-4fd5-8e36-f28ac6da397e","root":{"nodes":[{"type":13,"ns":[],"id":0,"ps":[1],"index":0,"rule":{"name":"Calculate","pattern":{"type":0,"id":7,"leftPattern":{"type":0,"id":6,"leftPattern":{"type":0,"id":5,"leftPattern":{"type":1,"id":1,"cls":"Fibonacci","alias":"f1","constraints":[{"type":5,"alias":"f1","cls":"Fibonacci"},{"options":{"alias":"f1","pattern":"f1.value != -1","scope2":{}},"pattern":"f1.value != -1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]},{"type":3,"alias":"f1","constraint":{"sequence":"s1"}}]},"rightPattern":{"type":1,"id":2,"cls":"Fibonacci","alias":"f2","constraints":[{"type":5,"alias":"f2","cls":"Fibonacci"},{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"pattern":"f2.value != -1 && f2.sequence == s1 + 1","type":4,"alias":"f2","constraint":[[["f2",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]},{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"op":"eq","type":7,"alias":"f2","constraint":[[["f2",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s1",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s1"]},{"type":3,"alias":"f2","constraint":{"sequence":"s2"}}]}},"rightPattern":{"type":1,"id":3,"cls":"Fibonacci","alias":"f3","constraints":[{"type":5,"alias":"f3","cls":"Fibonacci"},{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"pattern":"f3.value == -1 && f3.sequence == s2 + 1","type":1,"alias":"f3","constraint":[[["f3",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]},{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"op":"eq","type":7,"alias":"f3","constraint":[[["f3",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s2",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s2"]}]}},"rightPattern":{"type":1,"id":4,"cls":"Result","alias":"r","constraints":[{"type":5,"alias":"r","cls":"Result"},{"type":13,"alias":"r"}]}},"action":"let f1 = facts.get('f1');let f2 = facts.get('f2');let f3 = facts.get('f3');let r = facts.get('r');const modify=(...args)=>{flow.modify(...args)};const retract=(...args)=>{flow.retract(...args)};f3.value = r.result = f1.value + f2.value; \t\tmodify(f3); \t\tretract(f1);","priority":0,"agendaGroup":null,"autoFocus":false},"name":"Calculate"},{"type":6,"ns":[[0,-1]],"id":1,"ps":[5,6]},{"type":9,"ns":[[3,0]],"id":2,"ps":[],"constraint":{"type":5,"alias":"r","cls":"Result"}},{"type":10,"ns":[[4,0]],"id":3,"ps":[2],"alias":"r","p":0},{"type":11,"ns":[[5,0]],"id":4,"ps":[3],"constraint":{"type":13,"alias":"r"}},{"type":8,"ns":[[1,0]],"id":5,"ps":[4]},{"type":2,"ns":[[7,-1]],"id":6,"ps":[11,12],"constraint":{"type":14,"ns":[],"id":7,"ps":[],"constraint":{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"op":"eq","type":7,"alias":"f3","constraint":[[["f3",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s2",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s2"]},"isDefault":false}},{"type":7,"ns":[[1,-1]],"id":8,"ps":[]},{"type":9,"ns":[[9,1],[14,2],[20,3],[30,5],[20,7],[30,8]],"id":9,"ps":[],"constraint":{"type":5,"alias":"f3","cls":"Fibonacci"}},{"type":10,"ns":[[10,1]],"id":10,"ps":[8],"alias":"f3","p":1},{"type":11,"ns":[[11,1]],"id":11,"ps":[9],"constraint":{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"pattern":"f3.value == -1 && f3.sequence == s2 + 1","type":1,"alias":"f3","constraint":[[["f3",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]}},{"type":8,"ns":[[6,1]],"id":12,"ps":[10]},{"type":2,"ns":[[13,-1]],"id":13,"ps":[17,18],"constraint":{"type":14,"ns":[],"id":14,"ps":[],"constraint":{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"op":"eq","type":7,"alias":"f2","constraint":[[["f2",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s1",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s1"]},"isDefault":false}},{"type":7,"ns":[[6,-1]],"id":15,"ps":[]},{"type":10,"ns":[[15,2]],"id":17,"ps":[8],"alias":"f2","p":2},{"type":11,"ns":[[16,2]],"id":18,"ps":[14],"constraint":{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"pattern":"f2.value != -1 && f2.sequence == s1 + 1","type":4,"alias":"f2","constraint":[[["f2",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]}},{"type":12,"ns":[[17,2]],"id":19,"ps":[15],"constraint":{"type":3,"alias":"f2","constraint":{"sequence":"s2"}},"alias":"f2","constiables":{"sequence":"s2"}},{"type":8,"ns":[[12,2]],"id":20,"ps":[16]},{"type":6,"ns":[[19,-1]],"id":21,"ps":[23,27]},{"type":7,"ns":[[12,-1]],"id":22,"ps":[]},{"type":10,"ns":[[21,3],[37,7]],"id":24,"ps":[8],"alias":"f1","p":3},{"type":11,"ns":[[22,3]],"id":25,"ps":[20],"constraint":{"options":{"alias":"f1","pattern":"f1.value != -1","scope2":{}},"pattern":"f1.value != -1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]}},{"type":12,"ns":[[23,3]],"id":26,"ps":[21],"constraint":{"type":3,"alias":"f1","constraint":{"sequence":"s1"}},"alias":"f1","constiables":{"sequence":"s1"}},{"type":8,"ns":[[18,3]],"id":27,"ps":[22]},{"type":9,"ns":[[25,4],[25,6],[25,9]],"id":28,"ps":[],"constraint":{"type":5,"alias":"__i__","cls":"InitialFact"}},{"type":10,"ns":[[26,4],[26,6],[26,9]],"id":29,"ps":[24],"alias":"__i__","p":4},{"type":11,"ns":[[27,4],[34,6],[43,9]],"id":30,"ps":[25],"constraint":{"type":13,"alias":"__i__"}},{"type":7,"ns":[[18,4]],"id":31,"ps":[26]},{"type":13,"ns":[],"id":32,"ps":[29],"index":1,"rule":{"name":"Bootstrap","pattern":{"type":1,"id":8,"cls":"Fibonacci","alias":"f","constraints":[{"type":5,"alias":"f","cls":"Fibonacci"},{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]},{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":0,"alias":"f","constraint":[[[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"],[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[2,null,"number"],"eq"],"or"],null,"composite"]}]},"action":"let f = facts.get('f');const modify=(...args)=>{flow.modify(...args)};f.value = 1; \t\tmodify(f);","priority":0,"agendaGroup":null,"autoFocus":false},"name":"Bootstrap"},{"type":6,"ns":[[28,-1]],"id":33,"ps":[33,34]},{"type":10,"ns":[[31,5],[41,8]],"id":35,"ps":[8],"alias":"f","p":5},{"type":11,"ns":[[32,5]],"id":36,"ps":[30],"constraint":{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]}},{"type":11,"ns":[[33,5]],"id":37,"ps":[31],"constraint":{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":0,"alias":"f","constraint":[[[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"],[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[2,null,"number"],"eq"],"or"],null,"composite"]}},{"type":8,"ns":[[29,5]],"id":38,"ps":[32]},{"type":7,"ns":[[29,6]],"id":42,"ps":[26]},{"type":13,"ns":[],"id":43,"ps":[36],"index":2,"rule":{"name":"Recurse","pattern":{"type":0,"id":11,"leftPattern":{"type":7,"id":9,"cls":"Fibonacci","alias":"f","constraints":[{"type":5,"alias":"f","cls":"Fibonacci"},{"options":{"alias":"f","pattern":"f.sequence == 1","scope2":{}},"pattern":"f.sequence == 1","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"]}]},"rightPattern":{"type":1,"id":10,"cls":"Fibonacci","alias":"f1","constraints":[{"type":5,"alias":"f1","cls":"Fibonacci"},{"options":{"alias":"f1","pattern":"f1.sequence != 1","scope2":{}},"pattern":"f1.sequence != 1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"neq"]}]}},"action":"let f = facts.get('f');facts.has('f') && (f = facts.get('f'));let f1 = facts.get('f1');let Fibonacci = defined.get('Fibonacci');const assert=(...args)=>{flow.assert(...args)};assert(new Fibonacci(f1.sequence - 1));","priority":0,"agendaGroup":null,"autoFocus":false},"name":"Recurse"},{"type":6,"ns":[[35,-1]],"id":44,"ps":[38,39]},{"type":11,"ns":[[38,7]],"id":47,"ps":[20],"constraint":{"options":{"alias":"f1","pattern":"f1.sequence != 1","scope2":{}},"pattern":"f1.sequence != 1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"neq"]}},{"type":8,"ns":[[36,7]],"id":48,"ps":[37]},{"type":0,"ns":[[40,-1]],"id":49,"ps":[42,43],"constraint":{"type":14,"ns":[],"id":50,"ps":[],"constraint":{},"isDefault":true}},{"type":7,"ns":[[36,-1]],"id":51,"ps":[]},{"type":11,"ns":[[42,8]],"id":54,"ps":[30],"constraint":{"options":{"alias":"f","pattern":"f.sequence == 1","scope2":{}},"pattern":"f.sequence == 1","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"]}},{"type":8,"ns":[[39,8]],"id":55,"ps":[41]},{"type":7,"ns":[[39,9]],"id":59,"ps":[26]}],"patterns":[{"type":1,"id":4,"cls":"Result","alias":"r","constraints":[{"type":5,"alias":"r","cls":"Result"},{"type":13,"alias":"r"}]},{"type":1,"id":3,"cls":"Fibonacci","alias":"f3","constraints":[{"type":5,"alias":"f3","cls":"Fibonacci"},{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"pattern":"f3.value == -1 && f3.sequence == s2 + 1","type":1,"alias":"f3","constraint":[[["f3",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]},{"options":{"alias":"f3","pattern":"f3.value == -1 && f3.sequence == s2 + 1","scope2":{}},"op":"eq","type":7,"alias":"f3","constraint":[[["f3",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s2",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s2"]}]},{"type":1,"id":2,"cls":"Fibonacci","alias":"f2","constraints":[{"type":5,"alias":"f2","cls":"Fibonacci"},{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"pattern":"f2.value != -1 && f2.sequence == s1 + 1","type":4,"alias":"f2","constraint":[[["f2",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]},{"options":{"alias":"f2","pattern":"f2.value != -1 && f2.sequence == s1 + 1","scope2":{}},"op":"eq","type":7,"alias":"f2","constraint":[[["f2",null,"identifier"],["sequence",null,"identifier"],"prop"],[["s1",null,"identifier"],[1,null,"number"],"plus"],"eq"],"vars":["s1"]},{"type":3,"alias":"f2","constraint":{"sequence":"s2"}}]},{"type":1,"id":1,"cls":"Fibonacci","alias":"f1","constraints":[{"type":5,"alias":"f1","cls":"Fibonacci"},{"options":{"alias":"f1","pattern":"f1.value != -1","scope2":{}},"pattern":"f1.value != -1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"neq"]},{"type":3,"alias":"f1","constraint":{"sequence":"s1"}}]},{"type":6,"id":12,"cls":"InitialFact","alias":"__i__","constraints":[{"type":5,"alias":"__i__","cls":"InitialFact"},{"type":13,"alias":"__i__"}]},{"type":1,"id":8,"cls":"Fibonacci","alias":"f","constraints":[{"type":5,"alias":"f","cls":"Fibonacci"},{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["value",null,"identifier"],"prop"],[-1,null,"number"],"eq"]},{"options":{"alias":"f","pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","scope2":{}},"pattern":"f.value == -1 && (f.sequence == 1 || f.sequence == 2)","type":0,"alias":"f","constraint":[[[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"],[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[2,null,"number"],"eq"],"or"],null,"composite"]}]},{"type":6,"id":14,"cls":"InitialFact","alias":"__i__","constraints":[{"type":5,"alias":"__i__","cls":"InitialFact"},{"type":13,"alias":"__i__"}]},{"type":1,"id":10,"cls":"Fibonacci","alias":"f1","constraints":[{"type":5,"alias":"f1","cls":"Fibonacci"},{"options":{"alias":"f1","pattern":"f1.sequence != 1","scope2":{}},"pattern":"f1.sequence != 1","type":4,"alias":"f1","constraint":[[["f1",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"neq"]}]},{"type":7,"id":9,"cls":"Fibonacci","alias":"f","constraints":[{"type":5,"alias":"f","cls":"Fibonacci"},{"options":{"alias":"f","pattern":"f.sequence == 1","scope2":{}},"pattern":"f.sequence == 1","type":1,"alias":"f","constraint":[[["f",null,"identifier"],["sequence",null,"identifier"],"prop"],[1,null,"number"],"eq"]}]},{"type":6,"id":16,"cls":"InitialFact","alias":"__i__","constraints":[{"type":5,"alias":"__i__","cls":"InitialFact"},{"type":13,"alias":"__i__"}]}],"terminalNodes":[0,28,35],"joinNodes":[1,6,12,18,29,36],"alphaNodes":[3,4,9,10,14,15,16,20,21,22,25,26,30,31,32,37,41],"typeNodes":[2,8,24],"bucket":{"counter":0,"recency":0}}}